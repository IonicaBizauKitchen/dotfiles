{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":22,"width":1440,"height":874},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/zeke/code/hero/dashboard","buffers":[{"text":"class User\n  # Email addresses of all WAT members\n  def self.wat_team_emails\n    @wat_team_emails ||= %w(dkr dominic jonathan max mp raul zeke).map {|u| \"#{u}@heroku.com\" }\n  end\nend\n\nnamespace :dev do\n\n  namespace :notifications do\n\n    desc \"Generate some sample notifications\"\n    task :create => :environment do\n\n      # Prevent this task from running somewhere it shouldn't\n      return if Rails.env.production?\n\n      # Destroy existing notifications\n      Notification.destroy_all\n\n      # Create some new notifications\n      notifications = [\n        [\"Notification Center\", \"Hey! You're in the Dashboard Beta program, which means you've been given early access to the new notification center. Thanks for your participation.\"],\n        [\"Credit Card Expiring Soon\", \"The credit card associated with your account will expire next month. Visit [your account page](#) to update your billing information.\"],\n        [\"2X Dyno Pricing Change\", \"Prices are about to change. See the [pricing page](https://www.heroku.com/pricing) for details\"],\n        [\"Your Credit Card Has Expired\", \"Your credit card has expired. Please [update it](#).\"],\n        [\"Your Account is Delinquent\", \"Please [update your billing information](#) to avoid account suspension. What happens if this message wraps to two lines?\", true],\n        [\"Brevity Intolerance Policy\", \"Sometimes notifications contain really longs words like supercalifragilisticexpialidocious. In many cases this will break a layout. Lorem ipsum dolor sit amet, consectetur adipisicing elit.\"],\n        [\"Web Apps Team Expansion\", \"Zeke is on the team now!\"],\n      ].reverse.map do |n|\n        Notification.create!(\n          title: n[0],\n          message: n[1],\n          flash: n[2]\n        )\n      end\n\n      # Get an array of recipient user objects\n      users = User.wat_team_emails.map do |email|\n        UserInfo.find_or_create_by_email(email)\n      end\n\n      # Notify recipients\n      notifications.each do |notification|\n        users.each do |user|\n          user.notifications.push(notification)\n        end\n      end\n\n    end\n\n  end\n\nend","markers":{"markers":{"1":{"id":1,"range":[[11,4],[13,0]],"tailed":true,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":31,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/zeke/code/hero/dashboard/lib/tasks/dev.rake","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d048694b857d0a7c43cdad39ddccc6b438d60a55","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":31,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":32,"softWrap":false,"editorWidthInChars":110,"tokenizedBuffer":{"bufferPath":"/Users/zeke/code/hero/dashboard/lib/tasks/dev.rake","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/zeke/code/hero/dashboard/lib/tasks/dev.rake","focused":true,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"find-and-replace":{"projectViewState":{"findHistory":["invoke"],"replaceHistory":[],"pathsHistory":[],"modelState":{"useRegex":false,"caseSensitive":false}},"resultsModelState":{"useRegex":false,"caseSensitive":false}},"fuzzy-finder":{"/Users/zeke/code/hero/dashboard/lib/tasks/dev.rake":1395977588588},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":46958191},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/zeke/code/hero/dashboard/lib","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}